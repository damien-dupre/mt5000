---
title: "Tutorial 10: Visualisations in R Markdown Files"
subtitle: "MT5000 - Data Analytics & Visualization"
author: "Damien Dupr√©"
date: "Dublin City University"
output:
  xaringan::moon_reader:
    css: xaringan-themer.css
    nature:
      highlightStyle: solarized-light
      highlightLines: true
      countIncrementalSlides: false
---

```{r setup, include = FALSE}
# general options --------------------------------------------------------------
options(scipen = 999)
set.seed(42)
# chunk options ----------------------------------------------------------------
knitr::opts_chunk$set(
  cache.extra = knitr::rand_seed, 
  message = FALSE, 
  warning = FALSE, 
  error = FALSE, 
  echo = FALSE,
  cache = FALSE,
  eval = TRUE,
  comment = "", 
  fig.align = "center", 
  fig.retina = 3
  )
# libraries --------------------------------------------------------------------
library(tidyverse)
library(knitr)
library(kableExtra)
library(countdown)

# theme ------------------------------------------------------------------------
library(xaringanthemer)
style_mono_light(
  base_color = "#23395b",
  code_inline_background_color ="#23395b"
  )

# data -------------------------------------------------------------------------
titanic <- read_csv(here::here("data/titanic.csv"))
```

# Objectives

In this tutorial, with RStudio Cloud, we will see how to:

- Includes visualisations in R Markdown files
- Use chunck options for changing the size of the visualisations

---

# Requeriements

Before starting, we need to check that:

- You have created an account on RStudio cloud
- You have installed the required packages
- You have created a default R Markdown file
- An output document is created without errors we you press "knit" in the R Markdown file

---

class: inverse, mline, center, middle

# 1. Visualisations in R Markdown files

---

# Figures in the Output Document

As long as the package {tidyverse} is loaded and the data object created in the first setup chunk, then a ggplot visualisation can be used in a separated chunk:

````markdown
---
title: "Untitled"
output: pdf_document
---

`r ''````{r setup, include=FALSE}
library(tidyverse)

titanic <- read.csv("/cloud/project/titanic.csv")
```

# My Section Title

My text followed by my figure.

`r ''````{r}
ggplot(titanic, aes(Fare, Age)) +
  geom_point()
```
````

---

# Figures in the Output Document

Warning, if the code results in the creation of an object, then the output will not be displayed:

```{r echo=TRUE, eval=FALSE}
plot_titanic <- ggplot(titanic, aes(Fare, Age)) +
  geom_point()
```

To be displayed there are 2 solutions:

#### 1. The content has to be printed by ending the code with the object name

```{r echo=TRUE, eval=FALSE}
plot_titanic <- ggplot(titanic, aes(Fare, Age)) +
  geom_point()

plot_titanic
```

#### 2. The code is ran without creating an object

```{r echo=TRUE, eval=FALSE}
ggplot(titanic, aes(Fare, Age)) +
  geom_point()
```

---

class: inverse, mline, center, middle

# 2. Chunk Options for Visualisations

---

# Code Chunk Options

Chunk output can be customized with arguments set in the {} of a chunk header. Above, we use five arguments:

- include = FALSE prevents code and results from appearing in the finished file. R Markdown still runs the code in the chunk, and the results can be used by other chunks.
- echo = FALSE prevents code, but not the results from appearing in the finished file. This is a useful way to embed figures.
- message = FALSE prevents messages that are generated by code from appearing in the finished file.
- warning = FALSE prevents warnings that are generated by code from appearing in the finished.

See the **[R Markdown Reference Guide](https://www.rstudio.com/wp-content/uploads/2015/03/rmarkdown-reference.pdf)** for a complete list of knitr chunk options.

---

# Example of Chunk Options

In this following example, when the output document is created:

- echo = TRUE indicates that not only the output of the code is shown but also the code itself
- warning = FALSE indicates that no R warning will be displayed
- message = FALSE indicates that no R message will be displayed

````markdown

`r ''````{r, echo = TRUE, warning = FALSE, message = FALSE}
ggplot(titanic, aes(Fare, Age)) +
  geom_point()
```

````

---

# Set General Chunk Options

In the first setup chunk, define your chunk options for all document:

````markdown

`r ''````{r setup, include=FALSE}
# libraries -----------------------------------------------------------
library(tidyverse)

# options -------------------------------------------------------------
knitr::opts_chunk$set(
  message = FALSE, 
  warning = FALSE, 
  error = FALSE, 
  echo = FALSE
  )
  
# data ----------------------------------------------------------------
titanic <- read.csv("/cloud/project/titanic.csv")
```

````

---

# Visualisation Specific Options

Some chunk options are specific to visualisations outputs:

- fig.cap="caption of the figure"
- fig.height=5
- fig.width=5

Note, the default unit for height and width is inches.

````markdown
`r ''````{r, fig.cap="Example Caption", fig.height=2, fig.width=12}
ggplot(titanic, aes(Fare, Age)) +
  geom_point()
```
````

```{r, fig.cap="Example Caption", fig.height=2, fig.width=12, echo=FALSE}
ggplot(titanic, aes(Fare, Age)) +
  geom_point()
```

---

class: middle, inverse

# Demonstration